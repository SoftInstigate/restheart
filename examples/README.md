# RESTHeart Plugin Examples

Examples on how to extend [RESTHeart](https://github.com/SoftInstigate/restheart) with Java, Kotlin and JavaScript plugins.

The parent POM defines common properties while each module implements a single example.

The only required dependency for building Java plugins is `restheart-commons`:

```xml
<dependency>
    <groupId>org.restheart</groupId>
    <artifactId>restheart-commons</artifactId>
    <version>Tag</version>
</dependency>
```

## Build the plugins

Note: the `examples` module is by default excluded from building. To build it it's necessary to activate its Maven profile, using the `-P examples` parameter, as below.

```bash
$ git clone --depth 1 git@github.com:SoftInstigate/restheart.git
$ cd restheart/examples
$ ./mvnw clean package -P examples
```

## Deploy

[Install RESTHeart](https://restheart.org/docs/setup/).

To deploy a plugin, copy its jar file (and related external dependencies, if any) into the `./plugins` directory of RESTHeart.

Some examples require additional configuration. Refer to the plugin README file for detailed instructions.

Example:

```bash
$ cp greeter-service/target/greeter-service.jar <RH_HOME>/plugins
```

Where `<RH_HOME>` is the RESTHeart installation directory.

Restart RESTHeart to enable the plugin. The startup log messages will show:

```bash
$ java -jar restheart.jar
...
15:16:25.787 [main] INFO  org.restheart.Bootstrapper - URI /greetings bound to service greetings, secured: false, uri match PREFIX
...
15:17:37.039 [main] INFO  org.restheart.Bootstrapper - RESTHeart started
```

## Examples

 - [Greeter Service](greeter-service/README.md) - A basic Java REST Web service with JSON payloads (implements `JsonService`)
 - [Hello World](bytes-array-service/README.md) - A basic Java REST Web service with text payloads (implements `ByteArrayService`)
 - [MongoDB serverStatus service](mongo-status-service/README.md) - Exposes the `serverStatus` MongoDB system call; shows how to inject the `MongoClient` in a plugin.
 - [Random String](random-string-service/README.md) - Service that just return a random number; shows how to deploy a service that uses external dependencies.
 - [CSV Interceptor](csv-interceptor/README.md) - Converts coordinates from [CSV](https://en.wikipedia.org/wiki/Comma-separated_values) to a [GeoJSON](https://geojson.org) object; shows how to transform the requests handled by an existing Service with Interceptors.
 - [User Signup](user-signup/README.md) - Implements a user signup process. This is an example of a complex process implemented with few interceptors, a service and uses json schema validation and security permissions.
 - [Kotlin Greeter Service](kotlin-greeter-service/README.md) - Simple service implemented in Kotlin programming language.
 - [Credit Card Hider](credit-card-hider/README.md) - Simple JavaScript Interceptor to obfuscate the credit card numbers from the response of the MongoService. Shows how to transform the response generated by an existing Service with Interceptors.
 - [Protocol Buffer Contacts](protobuffer-contacts/README.md) - Interceptors that modify the request and response to MongoService to use Protocol Buffer as payloads.
 - [Freemarker HTML page](freemarker/README.md) - This example uses [Apache Freemarker](https://freemarker.apache.org/) to generate an HTML Web site.
